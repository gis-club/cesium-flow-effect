import{G as h}from"./lil-gui.esm-CNIGZg2U.js";import{d as f,n as d,h as p,j as g,o as C}from"./index-DdDzk9ui.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";class u{isConstant=!1;name;definitionChanged;url;duration;_time;color;constructor(e,a,l,c){this.name=e,this.definitionChanged=new Cesium.Event,this.url=l,this.duration=a||3e3,this._time=new Date().getTime(),this.color=c,Cesium.Material._materialCache.addMaterial("LineMaterialProperty",{fabric:{type:"LineMaterialProperty",uniforms:{time:-20,image:this.url,color:this.color},source:`
            czm_material czm_getMaterial(czm_materialInput materialInput)
            {
                czm_material material = czm_getDefaultMaterial(materialInput);
                vec2 st = materialInput.st;
                vec4 colorImage = texture(image, vec2(fract(st.s - time), st.t));
                // vec4 value = mix(color, colorImage, colorImage.a);
                material.alpha = colorImage.a;
                material.diffuse = colorImage.rgb + color.rgb;
                return material;
            }
      `},translucent:function(o){return!0}})}getType(){return"LineMaterialProperty"}getValue(e,a){return Cesium.defined(a)||(a={}),a.image=this.url,a.color=this.color,a.time=(new Date().getTime()-this._time)%this.duration/this.duration,a}equals(e){return e instanceof u&&this.name===e.name}}const M=t=>{const e=new Cesium.Viewer(t,{animation:!1,baseLayerPicker:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,timeline:!1,navigationHelpButton:!1});return e.creditDisplay.container.style.display="none",b(e),e},b=async t=>{const e=new h,a={color:"#000000"},l={lon:100.973227,lat:22.776595},c=[{lon:101.04524,lat:23.062507},{lon:101.687606,lat:23.428165},{lon:100.840011,lat:24.448523},{lon:100.701425,lat:23.500278},{lon:101.108512,lat:24.005712},{lon:101.859144,lat:22.58336},{lon:99.585406,lat:22.325924},{lon:99.931201,lat:22.553083},{lon:99.594372,lat:22.644423}],o=new u("line",1e3,"./airplane.png",Cesium.Color.fromCssColorString(a.color));c.forEach((n,i)=>{const s=y({position1:l,position2:n,height:1e4,num:100}),m=[];for(let r=0;r<s.length;r++)m.push(s[r][0],s[r][1],s[r][2]);t.entities.add({name:`line-${i}`,polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(m),material:o,width:50}})}),e.add(o,"duration").name("duration").min(0).max(1e4).step(100).onChange(n=>{o.duration=n}),e.add(o,"url").name("url").onChange(n=>{o.url=n}),e.addColor(a,"color").onChange(n=>{o.color=Cesium.Color.fromCssColorString(n)}),t.zoomTo(t.entities)},y=t=>{const e=t.height&&t.height>5e3?t.height:5e3,a=Math.abs(t.position1.lon-t.position2.lon)>Math.abs(t.position1.lat-t.position2.lat)?Math.abs(t.position1.lon-t.position2.lon):Math.abs(t.position1.lat-t.position2.lat),l=t.num&&t.num>50?t.num:50,c=[];let o=a/l;if(Math.abs(t.position1.lon-t.position2.lon)>Math.abs(t.position1.lat-t.position2.lat)){const n=(t.position2.lat-t.position1.lat)/l;t.position1.lon-t.position2.lon>0&&(o=-o);for(let i=0;i<l;i++){const s=e-Math.pow(-.5*a+Math.abs(o)*i,2)*4*e/Math.pow(a,2),m=t.position1.lon+o*i,r=t.position1.lat+n*i;c.push([m,r,s])}}else{const n=(t.position2.lon-t.position1.lon)/l;t.position1.lat-t.position2.lat>0&&(o=-o);for(let i=0;i<l;i++){const s=e-Math.pow(-.5*a+Math.abs(o)*i,2)*4*e/Math.pow(a,2),m=t.position1.lon+n*i,r=t.position1.lat+o*i;c.push([m,r,s])}}return c},w=f({__name:"3-material-迁移图",setup(t){const e=d("cesiumContainer");return p(()=>{M(e.value)}),(a,l)=>(C(),g("div",{ref_key:"cesiumContainer",ref:e,id:"cesiumContainer"},null,512))}}),x=_(w,[["__scopeId","data-v-eb6e7ac5"]]);export{x as default};
