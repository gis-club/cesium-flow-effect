import{G as h}from"./lil-gui.esm-CNIGZg2U.js";import{d as p,n as f,h as d,j as g,o as _}from"./index-Bn89_75I.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";class u{isConstant=!1;name;definitionChanged;url;duration;_time;color;repeat;constructor(e,a,l,c,i=3){this.name=e,this.definitionChanged=new Cesium.Event,this.url=l,this.duration=a||3e3,this._time=new Date().getTime(),this.color=c,this.repeat=i,Cesium.Material._materialCache.addMaterial("LineMaterialProperty",{fabric:{type:"LineMaterialProperty",uniforms:{time:-20,image:this.url,color:this.color,repeat:this.repeat},source:`
            czm_material czm_getMaterial(czm_materialInput materialInput)
            {
                czm_material material = czm_getDefaultMaterial(materialInput);
                vec2 st = materialInput.st;
                vec4 colorImage = texture(image, vec2(fract(st.s * repeat - time), st.t));
                
                material.diffuse = color.rgb;
                material.emission = colorImage.rgb * color.rgb;
                material.alpha = colorImage.a * color.a * 0.5;
                return material;
            }
      `},translucent:function(n){return!0}})}getType(){return"LineMaterialProperty"}getValue(e,a){return Cesium.defined(a)||(a={}),a.image=this.url,a.color=this.color,a.repeat=this.repeat,a.time=(new Date().getTime()-this._time)%this.duration/this.duration,a}equals(e){return e instanceof u&&this.name===e.name}}const M=t=>{const e=new Cesium.Viewer(t,{animation:!1,baseLayerPicker:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,timeline:!1,navigationHelpButton:!1});return e.creditDisplay.container.style.display="none",b(e),e},b=async t=>{const e=new h,a={color:"#000000"},l={lon:100.973227,lat:22.776595},c=[{lon:101.04524,lat:23.062507},{lon:101.687606,lat:23.428165},{lon:100.840011,lat:24.448523},{lon:100.701425,lat:23.500278},{lon:101.108512,lat:24.005712},{lon:101.859144,lat:22.58336},{lon:99.585406,lat:22.325924},{lon:99.931201,lat:22.553083},{lon:99.594372,lat:22.644423}],i=new u("line",1e3,"./arrow_line.png",Cesium.Color.fromCssColorString(a.color));c.forEach((n,o)=>{const s=y({position1:l,position2:n,height:1e4,num:100}),m=[];for(let r=0;r<s.length;r++)m.push(s[r][0],s[r][1],s[r][2]);t.entities.add({name:`line-${o}`,polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(m),material:i,width:10}})}),e.add(i,"duration").name("duration").min(0).max(1e4).step(100).onChange(n=>{i.duration=n}),e.add(i,"url").name("url").onChange(n=>{i.url=n}),e.addColor(a,"color").onChange(n=>{i.color=Cesium.Color.fromCssColorString(n)}),e.add(i,"repeat").name("repeat").min(1).max(10).step(1).onChange(n=>{i.repeat=n}),t.zoomTo(t.entities)},y=t=>{const e=t.height&&t.height>5e3?t.height:5e3,a=Math.abs(t.position1.lon-t.position2.lon)>Math.abs(t.position1.lat-t.position2.lat)?Math.abs(t.position1.lon-t.position2.lon):Math.abs(t.position1.lat-t.position2.lat),l=t.num&&t.num>50?t.num:50,c=[];let i=a/l;if(Math.abs(t.position1.lon-t.position2.lon)>Math.abs(t.position1.lat-t.position2.lat)){const n=(t.position2.lat-t.position1.lat)/l;t.position1.lon-t.position2.lon>0&&(i=-i);for(let o=0;o<l;o++){const s=e-Math.pow(-.5*a+Math.abs(i)*o,2)*4*e/Math.pow(a,2),m=t.position1.lon+i*o,r=t.position1.lat+n*o;c.push([m,r,s])}}else{const n=(t.position2.lon-t.position1.lon)/l;t.position1.lat-t.position2.lat>0&&(i=-i);for(let o=0;o<l;o++){const s=e-Math.pow(-.5*a+Math.abs(i)*o,2)*4*e/Math.pow(a,2),m=t.position1.lon+n*o,r=t.position1.lat+i*o;c.push([m,r,s])}}return c},w=p({__name:"4-material-纹理重复",setup(t){const e=f("cesiumContainer");return d(()=>{M(e.value)}),(a,l)=>(_(),g("div",{ref_key:"cesiumContainer",ref:e,id:"cesiumContainer"},null,512))}}),x=C(w,[["__scopeId","data-v-8c38cf92"]]);export{x as default};
